Ubuntu 安装Docker
~~~~~~~~~~~~~~~~~~~~~

前面已经介绍了Docker对各个操作系统以及平台的支持。本文中，将选择ubuntu14.04(AMD64)操作系统作为例，进行Docker CE版本学习。

操作系统准备
---------------
ARM64，Ubuntu14.04LTS

卸载之前的Docker安装
--------------------
如果已经安装了Docker|docker-engine的，可以使用如下指令，完成旧版本的卸载：

.. code-block:: console

   $ sudo apt-get remove docker docker-engine docker.io

.. end
在目录 `/var/log/docker/` 目录下，卸载后仍然保留原有的镜像，容器，以及网络的配置，现在Docker CE包已经改名为 `docker-ce`.

安装Docker 
----------
安装方式包括两种，一种为APT安装，一种是通过DEB包安装。

1、APT安装



2、deb包安装；用户可以到 `Docker源选取合适的包下载安装<https://download.docker.com/linux/ubuntu/dists/trusty/>`_.
下载后，使用如下命令进行安装：
.. code-block:: console
   root@cecgw:/home/cecgw# dpkg -i docker-ce_17.12.0~ce-0~ubuntu_amd64.deb
.. end
首次执行后，发现出现报错信息如下

.. code-block:: console

  root@cecgw:/home/cecgw#  dpkg -i docker-ce_17.12.0~ce-0~ubuntu_amd64.deb 
  (Reading database ... 134914 files and directories currently installed.)
  Preparing to unpack docker-ce_17.12.0~ce-0~ubuntu_amd64.deb ...
  Unpacking docker-ce (17.12.0~ce-0~ubuntu) over (17.12.0~ce-0~ubuntu) ...
  dpkg: dependency problems prevent configuration of docker-ce:
  docker-ce depends on libsystemd-journal0 (>= 201); however:
  Package libsystemd-journal0 is not installed.

  dpkg: error processing package docker-ce (--install):
  dependency problems - leaving unconfigured
  Processing triggers for ureadahead (0.100.0-16) ...
  Processing triggers for man-db (2.6.7.1-1ubuntu1) ...
  Errors were encountered while processing:
  docker-ce
.. end
发现




		 

# Stable 稳定版本每个季度一次更新；

2. Edge 版本每个月更新一次；

更多的信息可以参考 `Docker Community Edition <https://www.docker.com/community-edition/>`_.


企业版本与社区版本之间的异同
----------------------------
`具体可参考 <https://www.docker.com/pricing>`_.


.. image::./image/docker-diff-version.png



+-----------------------------------------------+------------+-----------------------+----------------+----------------+
| 支持内容                                      | 社区版本   |        企业基础版本   |  企业标准版本  |    企业高级版本|
+-----------------------------------------------+------------+-----------------------+----------------+----------------+
| 容器引擎、编排、网络、安全Container engine    |            |                       |                |                |
| built in orchestration, networking, security  | Yes        | Yes                   | Yes            | Yes            |       
+-----------------------------------------------+------------+-----------------------+----------------+----------------+
| Docker Certified Infrastructure, Plugins and  | No         | Yes                   | Yes            | Yes            |
| ISV Containers 认证的基础设施，插件以及ISV容器|            |                       |                |                |
+-----------------------------------------------+------------+-----------------------+----------------+----------------+
| Image Management                              | No         | No                    | Yes            | Yes            |
| private registry, caching (Windows and Linux) |            |                       |                |                |
| 镜像管理、私有注册服务                        |            |                       |                |                |
+-----------------------------------------------+------------+-----------------------+----------------+----------------+
| Docker数据中心(集成容器应用程序管理)          | No         | No                    | Yes            | Yes            |
+-----------------------------------------------+------------+-----------------------+----------------+----------------+
| Docker Datacenter Enhanced RBAC,              | No         | No                    | Yes            | Yes            |
| LDAP/AD support                               |            |                       |                |                |  
+-----------------------------------------------+------------+-----------------------+----------------+----------------+
| Integrated secrets mgmt, image signing policy | No         | No                    | No             | No             |
|  (Windows and Linux)                          |            |                       |                |                |
+-----------------------------------------------+------------+-----------------------+----------------+----------------+
| Secure multi-tenancy with node-based isolation| No         | No                    | No             | Yes            | 
+-----------------------------------------------+------------+-----------------------+----------------+----------------+
| Automated Image Promotion                     | No         | No                    | No             | Yes            |
+-----------------------------------------------+------------+-----------------------+----------------+----------------+
| Image security scanning and continuous        |            |                       |                |                |
| vulnerability scanning (Windows and Linux)    | No         | No                    | No             | Yes            |
+-----------------------------------------------+------------+-----------------------+----------------+----------------+
| LinuxVersion Business Critical PERNODE PERYEAR| 0          | $1,500 	             | $3,000 	      | $3,500	       |
+-----------------------------------------------+------------+-----------------------+----------------+----------------+
| LinuxVersion Business Day PERNODE PERYEAR     | 0          | $750 	             | $1,500 	      | $2,000	       |
+-----------------------------------------------+------------+-----------------------+----------------+----------------+
| WinSeVersion Business Critical PERNODE PERYEAR| 0          | N/A 	             | $1,500 	      | $2,000	       |
+-----------------------------------------------+------------+-----------------------+----------------+----------------+
| WinSeVersion Business Day PERNODE PERYEAR     | 0          | N/A 	             | $750 	      | $1,250	       |
+-----------------------------------------------+------------+-----------------------+----------------+----------------+

.. Note::

   可以看出，商用产品的定价策略是按照节点、时间、以及操作系统版本进行定价。Linux版本相比较于Winserver版本要更贵一些。

支持的平台类型
--------------

Docker CE以及EE 版本均支持多个平台。可以在本地部署也支持云端部署。

支持平台如下：

DESKTOP

+------------------------+---------------------+-----------------------+----------------+
|  平台                  |  Docker CE x86_64   | Docker CE ARM 	       |  Docker EE     |
+------------------------+---------------------+-----------------------+----------------+
| Docker for Mac (macOS) | YES                 | No                    | No             |
+------------------------+---------------------+-----------------------+----------------+
| Docker for Win10       | YES                 | No                    | No             |
+------------------------+---------------------+-----------------------+----------------+

Cloud

+------------------------+---------------------+-----------------------+----------------+
|  平台                  |  Docker CE x86_64   | Docker CE ARM         |  Docker EE     |
+------------------------+---------------------+-----------------------+----------------+
| Amazon Web Services    | YES                 | No                    | YES            |
+------------------------+---------------------+-----------------------+----------------+
| Microsoft Azure        | YES                 | No                    | YES            |
+------------------------+---------------------+-----------------------+----------------+

操作系统支持

+------------------------+-------------------+---------------+-----------------+---------------------+----------------+-------------------+
| Platform               | Docker CE x86_64  | Docker CE ARM |  Docker CE ARM64| Docker CEIBMZ(s390x)|Docker EE x86_64|DockerEEIBMZ(s390x)|
+------------------------+-------------------+---------------+-----------------+---------------------+----------------+-------------------+
| Centos                 | yes               | no            | no              | no                  | yes            | no                |
+------------------------+-------------------+---------------+-----------------+---------------------+----------------+-------------------+
| Debian                 | yes               | yes           | yes             | no                  | no             | no                |
+------------------------+-------------------+---------------+-----------------+---------------------+----------------+-------------------+
| Fedora                 | yes               | no            | no              | no                  | no             | no                |
+------------------------+-------------------+---------------+-----------------+---------------------+----------------+-------------------+
| WinSer2016             | no                | no            | no              | no                  | yes            | no                |
+------------------------+-------------------+---------------+-----------------+---------------------+----------------+-------------------+
| OracleLinux            | no                | no            | no              | no                  | yes            | no                |
+------------------------+-------------------+---------------+-----------------+---------------------+----------------+-------------------+
| Red Hat Enterprise     | no                | no            | no              | no                  | yes            | yes               |
+------------------------+-------------------+---------------+-----------------+---------------------+----------------+-------------------+
| SUSE Linux Enterprise S| no                | no            | no              | no                  | yes            | yes               |
+------------------------+-------------------+---------------+-----------------+---------------------+----------------+-------------------+
| Ubuntu                 | yes               | yes           | yes             | yes                 | yes            | yes               |
+------------------------+-------------------+---------------+-----------------+---------------------+----------------+-------------------+


.. Note::
   
   看支持平台表，Docker对Ubuntu的支持应该是最全面的。
